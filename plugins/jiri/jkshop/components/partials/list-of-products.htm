    
{% set index = 0 %}
{% set addSeparater = false %}
    {% for product in productsPagination.items()|slice(productsPagination.perPage()*(productsPagination.currentPage()-1), productsPagination.perPage()) %}
        {# start row for each 3 products  and 2 lines#}
        {% if index==0 %}
            <div class="row item-page center-block">
        {% endif %}
        {% set index = index+1 %}

        
        <!--Display Item Block-->
        {% if index < 3%}
         {% set addSeparater = true %}
        {% endif %}
 

        
        <div class="col-xs-6 col-sm-4 col-md-4 item-display-box ">

            <!--header and add to cart-->
            <div class="row">
                <!--Product Name-->
                <div class="col-sm-10 col-xs-10">
                    <h3 class="cursor-pointer ellipsis" onclick="location.href = '{{ product.url}}'">{{ product.title }}</h3>
                </div>
                <!--Other Images Click-->
                <div class="col-sm-2 col-xs-2">
                  
                </div>
            </div>

            
            <div class="text-center">
                {% if product.getMainImage %}
                <img src="{{ product.getMainImage.thumb(auto,300, { extension: 'png' }) }}" class="img-responsive cursor-pointer" onclick="location.href = '{{ product.url}}'" >
                {% endif %}
            </div>

            <!--Below Image-->
            <div class="row">

               

                <!--Checkout Button-->
                <div class="col-md-3 checkout">
                
                {% if product.isAllowOrder %}
                    {% if product.properties|length > 0 %}
                        <button type="button" class="add-to-cart" class="btn btn-primary" onclick="location.href = '{{ product.url}}'"><img src="{'assets/images/store/shopping-cart-add.png' |theme}"/></button>
                    {% else %}
                        <a class="add-to-cart center-block text-center" data-request-data="id: {{ product.id }}" data-request="onAddToBasket"><img src="{{ 'assets/images/store/shopping-cart.png' |theme}}"/>Buy</a>
                    {% endif %}
                 {% endif %}
                </div>

                <!--Details Button-->
                <div class="col-md-3 details ">
                    <img class="link-to-item-page" onclick="location.href = '{{ product.url}}'" src="{{ 'assets/images/store/question.png' |theme}}"/>
                </div>

           

       
                <!--PRICE-->
                <div class="col-md-3 price">
                    <h2>
                        {{ product.getFinalPriceFormated }}
                    </h2>
                </div>

            </div>       
        </div>  

        <!--End Display Item Block-->

        <!--Separator-->
        {% if addSeparater == true %}
            {% set addSeparater = false %}
            <div class="col-xs-1"> <img class="separator center-block text-center" src="{{ 'assets/images/store/separator.png' |theme}}"/></div>
        {% endif %}


        {# end row for each 3 products  2 lines#}
        {% if index==3 %}
            {% set index = 0 %}
            </div>
        {% endif %}
    {% else %}
        <div class="no-data">no products</div>
    {% endfor %}
    
        {# if we have on page less then 4 products #}
        {% if index!=0 %}
            {% set index = 0 %}
            </div>
        {% endif %}
    
    
{% if productsPagination.lastPage > 1 %}
<div class="pagination-wrapper">
    <ul class="pagination">
        {% if productsPagination.currentPage > 1 %}
            <li><a href="{{ this.page.baseFileName|page({ (pageParam): (productsPagination.currentPage-1) }) }}">&larr; Prev</a></li>
        {% endif %}

        {% for page in 1..productsPagination.lastPage %}
            <li class="{{ productsPagination.currentPage == page ? 'active' : null }}">
                <a href="{{ this.page.baseFileName|page({ (pageParam): page }) }}">{{ page }}</a>
            </li>
        {% endfor %}

        {% if productsPagination.lastPage > productsPagination.currentPage %}
            <li><a href="{{ this.page.baseFileName|page({ (pageParam): (productsPagination.currentPage+1) }) }}">Next &rarr;</a></li>
        {% endif %}
    </ul>
</div>
{% endif %}